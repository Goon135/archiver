# Python Archiver (bz2 / zstd)

Консольная утилита архиватор/распаковщик, реализованная **исключительно средствами стандартной библиотеки Python 3.14**.

Утилита поддерживает алгоритмы сжатия **bz2** и **zstd**, автоматически определяет режим работы по расширению целевого архива и умеет работать как с файлами, так и с директориями.

---

## Возможности

* Python **3.14**
* Только **standard library**
* Поддерживаемые форматы:

  * `.bz2` (модуль `bz2`)
  * `.zst` (модуль `compression.zstd`)
* Автоопределение алгоритма по расширению архива
* Поддержка файлов и директорий
* Для директорий автоматически используется `tarfile`
* Архивация и распаковка
* Консольный прогресс-бар (опционально)
* Режим benchmark с измерением времени выполнения
* CLI-справка через `argparse`

---

## Требования

* Python **3.14** или новее
* Операционная система: любая, поддерживающая Python 3.14
* Внешние зависимости **не требуются**


---

## Использование

### Общий синтаксис

```bash
python archiver.py SOURCE [TARGET] [OPTIONS]
```

---

## Архивация

### Архивация файла (bz2)

```bash
python archiver.py test.txt test.txt.bz2 --benchmark --progress
```

### Архивация файла (zstd)

```bash
python archiver.py test.txt test.txt.zst --benchmark --progress
```

### Архивация директории

Если источником является директория, она автоматически упаковывается в `tar` перед сжатием:

```bash
python archiver.py mydir mydir.tar.zst --benchmark --progress
```

---

## Распаковка

### Распаковка файла

```bash
python archiver.py test.txt.bz2 --extract --benchmark --progress
```

### Распаковка директории

```bash
python archiver.py mydir.tar.zst --extract --benchmark --progress
```

После распаковки `.tar`-архив автоматически извлекается, временный файл удаляется.

---

## Параметры командной строки

| Параметр            | Описание                             |
| ------------------- | ------------------------------------ |
| `SOURCE`            | Исходный файл, директория или архив  |
| `TARGET`            | Целевой архив (только для архивации) |
| `-x`, `--extract`   | Режим распаковки                     |
| `-b`, `--benchmark` | Вывод времени выполнения             |
| `-p`, `--progress`  | Отображение прогресс-бара            |
| `-h`, `--help`      | Справка                              |

---

## Прогресс-бар

Прогресс отображается по объёму **входных данных**. Для алгоритмов сжатия и распаковки размер выходного файла заранее неизвестен, поэтому процент ограничивается 100%.

---

## Пример вывода

```text
[#########################-------------] 62%
Время выполнения: 0.347 сек
```

---

## Особенности реализации

* Для `.bz2` используется модуль `bz2`
* Для `.zst` используется модуль `compression.zstd`, добавленный в Python 3.14
* Внешние утилиты и сторонние библиотеки не используются
* Временные файлы корректно удаляются после завершения работы
